<div class="dashboard-page">
  <app-header></app-header>

  <main class="dashboard-content deka-container">
    <section class="dashboard-welcome">
      <div class="welcome-text">
        <h1>Willkommen, {{ username }}!</h1>
        <p>Hier können Sie Ihre Versandjobs verwalten und neue anlegen.</p>
      </div>
      <div class="welcome-actions">
        <a routerLink="/versandjob/neu" class="deka-btn deka-btn-primary">
          <span class="icon-plus">+</span> Neuen Versandjob anlegen
        </a>
      </div>
    </section>

    <section class="dashboard-stats">
      <div class="stats-grid">
        <div class="stats-card deka-card">
          <div class="stats-value">{{ statisticsData.totalJobs }}</div>
          <div class="stats-label">Versandjobs gesamt</div>
        </div>

        <div class="stats-card deka-card">
          <div class="stats-value status-open-text">{{ statisticsData.openJobs }}</div>
          <div class="stats-label">Offen</div>
        </div>

        <div class="stats-card deka-card">
          <div class="stats-value status-in-progress-text">{{ statisticsData.inProgressJobs }}</div>
          <div class="stats-label">In Vorbereitung</div>
        </div>

        <div class="stats-card deka-card">
          <div class="stats-value status-shipped-text">{{ statisticsData.shippedJobs }}</div>
          <div class="stats-label">Versendet</div>
        </div>
      </div>
    </section>

    <section class="dashboard-recent">
      <div class="section-header">
        <h2>Aktuelle Versandjobs</h2>
        <a routerLink="/versandjobs" class="deka-btn deka-btn-secondary">Alle anzeigen</a>
      </div>

      <div class="deka-card">
        <div class="deka-card-body">
          <table class="deka-table recent-jobs-table">
            <thead>
              <tr>
                <th>Veranstaltung</th>
                <th>Zeitraum</th>
                <th>Veranstaltungsort</th>
                <th>Status</th>
                <th>Aktionen</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let job of recentJobs">
                <td>{{ job.name }}</td>
                <td>{{ formatDate(job.startDate) }} - {{ formatDate(job.endDate) }}</td>
                <td>{{ job.location }}</td>
                <td>
                  <span class="status-badge" [ngClass]="getStatusClass(job.status)">
                    {{ job.status }}
                  </span>
                </td>
                <td>
                  <a [routerLink]="['/versandjob', job.id]" class="deka-btn deka-btn-secondary action-btn">
                    Details
                  </a>
                </td>
              </tr>
              <tr *ngIf="recentJobs.length === 0">
                <td colspan="5" class="no-jobs-message">
                  Keine Versandjobs vorhanden.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="dashboard-info deka-card">
      <div class="deka-card-header">
        <h3 class="deka-mb-0">Hilfe & Support</h3>
      </div>
      <div class="deka-card-body">
        <p>Bei Fragen zur Benutzung des Versandjob-Portals oder bei Problemen mit Ihrer Bestellung wenden Sie sich bitte an unser Support-Team:</p>
        <div class="info-contact">
          <div class="contact-item">
            <span class="contact-label">Telefon:</span>
            <span class="contact-value">+49 (0) 821 / 43 000</span>
          </div>
          <div class="contact-item">
            <span class="contact-label">E-Mail:</span>
            <span class="contact-value">support&#64;deka-messebau.de</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="deka-footer">
    <div class="deka-container">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="assets/logo.svg" alt="DEKA branding spaces Logo">
          <p>© {{ 2025 }} DEKA branding spaces GmbH</p>
        </div>

        <div class="footer-links">
          <a href="https://www.deka-messebau.de/impressum" target="_blank">Impressum</a>
          <a href="https://www.deka-messebau.de/datenschutz" target="_blank">Datenschutz</a>
          <a href="https://www.deka-messebau.de/kontakt" target="_blank">Kontakt</a>
        </div>
      </div>
    </div>
  </footer>
</div>